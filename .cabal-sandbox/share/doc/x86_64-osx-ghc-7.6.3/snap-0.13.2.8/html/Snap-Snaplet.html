<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Snap.Snaplet</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Snap-Snaplet.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">snap-0.13.2.8: Top-level package for the Snap Web Framework</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Snap.Snaplet</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Snaplet
</a></li><li><a href="#g:2">Lenses
</a></li><li><a href="#g:3">Snaplet Helper Functions
</a></li><li><a href="#g:4">MonadSnaplet
</a></li><li><a href="#g:5">Snaplet state manipulation
</a></li><li><a href="#g:6">Initializer
</a></li><li><a href="#g:7">Routes
</a></li><li><a href="#g:8">Handlers
</a></li><li><a href="#g:9">Serving Applications
</a></li><li><a href="#g:10">Snaplet Lenses
</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Snaplets allow you to build web applications out of composable parts. This
allows you to build self-contained units and glue them together to make your
overall application.
</p><p>A snaplet has a few moving parts, some user-defined and some provided by the
snaplet API:
</p><ul><li> each snaplet has its own configuration given to it at startup.
</li><li> each snaplet is given its own directory on the filesystem, from which it
    reads its configuration and in which it can store files.
</li><li> each snaplet comes with an <code><a href="Snap-Snaplet.html#t:Initializer">Initializer</a></code> which defines how to create an
    instance of the Snaplet at startup. The initializer decides how to
    interpret the snaplet configuration, which URLs to handle (and how), sets
    up the initial snaplet state, tells the snaplet runtime system how to
    clean the snaplet up, etc.
</li><li> each snaplet contains some user-defined in-memory state; for instance, a
    snaplet that talks to a database might contain a reference to a connection
    pool. The snaplet state is an ordinary Haskell record, with a datatype
    defined by the snaplet author. The initial state record is created during
    initialization and is available to snaplet <code><a href="Snap-Snaplet.html#t:Handler">Handler</a></code>s when serving HTTP
    requests.
</li></ul><p>NOTE: This documentation is written as a prose tutorial of the snaplets
API.  Don't be scared by the fact that it's auto-generated and is filled with
type signatures.  Just keep reading.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span>  <a href="#t:Snaplet">Snaplet</a> s</li><li class="src short"><span class="keyword">data</span>  <a href="#t:SnapletConfig">SnapletConfig</a> </li><li class="src short"><a href="#v:snapletConfig">snapletConfig</a> :: <span class="keyword">forall</span> s.  <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/lens-4.1.2.1/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> s) <a href="Snap-Snaplet.html#t:SnapletConfig">SnapletConfig</a></li><li class="src short"><a href="#v:snapletValue">snapletValue</a> :: <span class="keyword">forall</span> s.  <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/lens-4.1.2.1/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> s) s</li><li class="src short"><a href="#v:subSnaplet">subSnaplet</a> ::  <a href="Snap-Snaplet.html#t:SnapletLens">SnapletLens</a> a b -&gt; <a href="Snap-Snaplet.html#t:SnapletLens">SnapletLens</a> (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> a) b</li><li class="src short"><span class="keyword">class</span>  <a href="#t:MonadSnaplet">MonadSnaplet</a> m  <span class="keyword">where</span><ul class="subs"><li><a href="#v:with">with</a> ::  <a href="Snap-Snaplet.html#t:SnapletLens">SnapletLens</a> v v' -&gt; m b v' a -&gt; m b v a</li><li><a href="#v:withTop">withTop</a> ::  <a href="Snap-Snaplet.html#t:SnapletLens">SnapletLens</a> b v' -&gt; m b v' a -&gt; m b v a</li><li><a href="#v:with-39-">with'</a> ::  <a href="Snap-Snaplet.html#t:SnapletLens">SnapletLens</a> (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> v) v' -&gt; m b v' a -&gt; m b v a</li><li><a href="#v:withTop-39-">withTop'</a> ::  <a href="Snap-Snaplet.html#t:SnapletLens">SnapletLens</a> (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> b) v' -&gt; m b v' a -&gt; m b v a</li><li><a href="#v:getLens">getLens</a> ::  m b v (<a href="Snap-Snaplet.html#t:SnapletLens">SnapletLens</a> (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> b) v)</li><li><a href="#v:getOpaqueConfig">getOpaqueConfig</a> ::  m b v <a href="Snap-Snaplet.html#t:SnapletConfig">SnapletConfig</a></li></ul></li><li class="src short"><a href="#v:getSnapletAncestry">getSnapletAncestry</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> (m b v), <a href="Snap-Snaplet.html#t:MonadSnaplet">MonadSnaplet</a> m) =&gt; m b v [<a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a>]</li><li class="src short"><a href="#v:getSnapletFilePath">getSnapletFilePath</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> (m b v), <a href="Snap-Snaplet.html#t:MonadSnaplet">MonadSnaplet</a> m) =&gt; m b v <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a></li><li class="src short"><a href="#v:getSnapletName">getSnapletName</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> (m b v), <a href="Snap-Snaplet.html#t:MonadSnaplet">MonadSnaplet</a> m) =&gt; m b v (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a>)</li><li class="src short"><a href="#v:getSnapletDescription">getSnapletDescription</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> (m b v), <a href="Snap-Snaplet.html#t:MonadSnaplet">MonadSnaplet</a> m) =&gt; m b v <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a></li><li class="src short"><a href="#v:getSnapletUserConfig">getSnapletUserConfig</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> (m b v), <a href="Snap-Snaplet.html#t:MonadSnaplet">MonadSnaplet</a> m) =&gt; m b v <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/configurator-0.3.0.0/html/Data-Configurator-Types.html#t:Config">Config</a></li><li class="src short"><a href="#v:getSnapletRootURL">getSnapletRootURL</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> (m b v), <a href="Snap-Snaplet.html#t:MonadSnaplet">MonadSnaplet</a> m) =&gt; m b v <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a></li><li class="src short"><a href="#v:snapletURL">snapletURL</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> (m b v), <a href="Snap-Snaplet.html#t:MonadSnaplet">MonadSnaplet</a> m) =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; m b v <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a></li><li class="src short"><a href="#v:getRoutePattern">getRoutePattern</a> ::  <a href="Snap-Snaplet.html#t:Handler">Handler</a> b v (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a>)</li><li class="src short"><a href="#v:setRoutePattern">setRoutePattern</a> ::  <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Snap-Snaplet.html#t:Handler">Handler</a> b v ()</li><li class="src short"><a href="#v:getSnapletState">getSnapletState</a> ::  <a href="Snap-Snaplet.html#t:Handler">Handler</a> b v (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> v)</li><li class="src short"><a href="#v:putSnapletState">putSnapletState</a> ::  <a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> v -&gt; <a href="Snap-Snaplet.html#t:Handler">Handler</a> b v ()</li><li class="src short"><a href="#v:modifySnapletState">modifySnapletState</a> ::  (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> v -&gt; <a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> v) -&gt; <a href="Snap-Snaplet.html#t:Handler">Handler</a> b v ()</li><li class="src short"><a href="#v:getsSnapletState">getsSnapletState</a> ::  (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> v -&gt; b) -&gt; <a href="Snap-Snaplet.html#t:Handler">Handler</a> b1 v b</li><li class="src short"><span class="keyword">data</span>  <a href="#t:Initializer">Initializer</a> b v a</li><li class="src short"><span class="keyword">data</span>  <a href="#t:SnapletInit">SnapletInit</a> b v</li><li class="src short"><a href="#v:makeSnaplet">makeSnaplet</a> ::  <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> -&gt; <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a>) -&gt; <a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v v -&gt; <a href="Snap-Snaplet.html#t:SnapletInit">SnapletInit</a> b v</li><li class="src short"><a href="#v:nestSnaplet">nestSnaplet</a> ::  <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Snap-Snaplet.html#t:SnapletLens">SnapletLens</a> v v1 -&gt; <a href="Snap-Snaplet.html#t:SnapletInit">SnapletInit</a> b v1 -&gt; <a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> v1)</li><li class="src short"><a href="#v:embedSnaplet">embedSnaplet</a> ::  <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Snap-Snaplet.html#t:SnapletLens">SnapletLens</a> v v1 -&gt; <a href="Snap-Snaplet.html#t:SnapletInit">SnapletInit</a> v1 v1 -&gt; <a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> v1)</li><li class="src short"><a href="#v:nameSnaplet">nameSnaplet</a> ::  <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> -&gt; <a href="Snap-Snaplet.html#t:SnapletInit">SnapletInit</a> b v -&gt; <a href="Snap-Snaplet.html#t:SnapletInit">SnapletInit</a> b v</li><li class="src short"><a href="#v:onUnload">onUnload</a> ::  <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> () -&gt; <a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v ()</li><li class="src short"><a href="#v:addPostInitHook">addPostInitHook</a> ::  (v -&gt; <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/either-4.3.0.1/html/Control-Monad-Trans-Either.html#t:EitherT">EitherT</a> <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> v) -&gt; <a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v ()</li><li class="src short"><a href="#v:addPostInitHookBase">addPostInitHookBase</a> ::  (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> b -&gt; <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/either-4.3.0.1/html/Control-Monad-Trans-Either.html#t:EitherT">EitherT</a> <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> b)) -&gt; <a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v ()</li><li class="src short"><a href="#v:printInfo">printInfo</a> ::  <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> -&gt; <a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v ()</li><li class="src short"><a href="#v:getRoutes">getRoutes</a> ::  <a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v [<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a>]</li><li class="src short"><a href="#v:getEnvironment">getEnvironment</a> ::  <a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a></li><li class="src short"><a href="#v:addRoutes">addRoutes</a> ::  [(<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a>, <a href="Snap-Snaplet.html#t:Handler">Handler</a> b v ())] -&gt; <a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v ()</li><li class="src short"><a href="#v:wrapSite">wrapSite</a> ::  (<a href="Snap-Snaplet.html#t:Handler">Handler</a> b v () -&gt; <a href="Snap-Snaplet.html#t:Handler">Handler</a> b v ()) -&gt; <a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v ()</li><li class="src short"><span class="keyword">data</span>  <a href="#t:Handler">Handler</a> b v a</li><li class="src short"><a href="#v:failIfNotLocal">failIfNotLocal</a> :: <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-core-0.9.6.3/html/Snap-Core.html#t:MonadSnap">MonadSnap</a> m =&gt; m b -&gt; m b</li><li class="src short"><a href="#v:reloadSite">reloadSite</a> ::  <a href="Snap-Snaplet.html#t:Handler">Handler</a> b v ()</li><li class="src short"><a href="#v:modifyMaster">modifyMaster</a> ::  v -&gt; <a href="Snap-Snaplet.html#t:Handler">Handler</a> b v ()</li><li class="src short"><a href="#v:bracketHandler">bracketHandler</a> ::  <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> a -&gt; (a -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> x) -&gt; (a -&gt; <a href="Snap-Snaplet.html#t:Handler">Handler</a> b v c) -&gt; <a href="Snap-Snaplet.html#t:Handler">Handler</a> b v c</li><li class="src short"><a href="#v:runSnaplet">runSnaplet</a> ::  <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> -&gt; <a href="Snap-Snaplet.html#t:SnapletInit">SnapletInit</a> b b -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> (<a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a>, <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-core-0.9.6.3/html/Snap-Core.html#t:Snap">Snap</a> (), <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> ())</li><li class="src short"><a href="#v:combineConfig">combineConfig</a> ::  <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-server-0.9.4.5/html/Snap-Http-Server-Config.html#t:Config">Config</a> <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-core-0.9.6.3/html/Snap-Core.html#t:Snap">Snap</a> a -&gt; <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-core-0.9.6.3/html/Snap-Core.html#t:Snap">Snap</a> () -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> (<a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-server-0.9.4.5/html/Snap-Http-Server-Config.html#t:Config">Config</a> <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-core-0.9.6.3/html/Snap-Core.html#t:Snap">Snap</a> a, <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-core-0.9.6.3/html/Snap-Core.html#t:Snap">Snap</a> ())</li><li class="src short"><a href="#v:serveSnaplet">serveSnaplet</a> ::  <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-server-0.9.4.5/html/Snap-Http-Server-Config.html#t:Config">Config</a> <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-core-0.9.6.3/html/Snap-Core.html#t:Snap">Snap</a> <a href="Snap-Snaplet-Config.html#t:AppConfig">AppConfig</a> -&gt; <a href="Snap-Snaplet.html#t:SnapletInit">SnapletInit</a> b b -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:loadAppConfig">loadAppConfig</a> :: <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/directory-tree-0.12.0/html/System-Directory-Tree.html#t:FileName">FileName</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/configurator-0.3.0.0/html/Data-Configurator-Types.html#t:Config">Config</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:SnapletLens">SnapletLens</a> s a = <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/lens-4.1.2.1/html/Control-Lens-Lens.html#t:ALens-39-">ALens'</a> s (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> a)</li></ul></div><div id="interface"><h1 id="g:1">Snaplet
</h1><div class="doc"><p>The heart of the snaplets infrastructure is state management. (Note: when
 we say &quot;state&quot; here, we mean in-memory Haskell objects, not external data
 storage or databases; how you deal with persisted data is up to you.) Most
 nontrivial pieces of a web application need some kind of runtime state or
 environment data. The datatype we use to handle this is called <code><a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a></code>:
</p></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Snaplet" class="def">Snaplet</a> s </p><div class="doc"><p>Snaplet's type parameter <code>s</code> here is user-defined and can be any Haskell
 type.  A value of type <code>Snaplet s</code> countains a couple of things:
</p><ul><li> a value of type <code>s</code>, called the &quot;user state&quot;.
</li><li> some bookkeeping data the framework uses to plug things together, like
   the snaplet's configuration, the snaplet's root directory on the
   filesystem, the snaplet's root URL, and so on.
</li></ul></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:SnapletConfig" class="def">SnapletConfig</a>  </p><div class="doc"><p>An opaque data type holding internal snaplet configuration data.  It is
 exported publicly because the getOpaqueConfig function in MonadSnaplet
 makes implementing new instances of MonadSnaplet more convenient.
</p></div></div><h1 id="g:2">Lenses
</h1><div class="doc"><p>In the example above, the <code>Foo</code> snaplet has to be written to work with any
 base state (otherwise it wouldn't be reusable!), but functions written to
 work with the <code>Foo</code> snaplet want to be able to modify the <code>Foo</code> record
 <em>within the context</em> of the base state. Given that Haskell datatypes are
 pure, how do you allow for this?
</p><p>Our solution is to use <em>lenses</em>, as defined in Edward Kmett's <code>lens</code>
 library (<a href="http://hackage.haskell.org/package/lens">http://hackage.haskell.org/package/lens</a>). A lens, notated
 as follows:
</p><pre> SimpleLens a b
</pre><p>is conceptually a &quot;getter&quot; and a &quot;setter&quot; rolled up into one. The
 <code>lens</code> library provides the following functions:
</p><pre> view :: (SimpleLens a b) -&gt; a -&gt; b
 set  :: (SimpleLens a b) -&gt; b -&gt; a -&gt; a
 over :: (SimpleLens a b) -&gt; (b -&gt; b) -&gt; a -&gt; a
</pre><p>which allow you to get, set, and modify a value of type <code>b</code> within the
 context of type <code>a</code>. The <code>lens</code> package comes with a Template Haskell
 function called <code>makeLenses</code>, which auto-magically defines a lens for every
 record field having a name beginning with an underscore. In the <code>App</code>
 example above, adding the declaration:
</p><pre> makeLenses ''App
</pre><p>would define lenses:
</p><pre> foo                :: SimpleLens App (Snaplet Foo)
 bar                :: SimpleLens App (Snaplet Bar)
 someNonSnapletData :: SimpleLens App String
</pre><p>The coolest thing about <code>lens</code> lenses is that they <em>compose</em> using the
 <code>(.)</code> operator. If the <code>Foo</code> type had a field of type <code>Quux</code> within it with
 a lens <code>quux :: SimpleLens Foo Quux</code>, then you could create a lens of type
 <code>SimpleLens App Quux</code> by composition:
</p><pre> import Control.Lens

 data Foo = Foo { _quux :: Quux }
 makeLenses ''Foo

 -- snapletValue is defined in the framework:
 snapletValue :: SimpleLens (Snaplet a) a

 appQuuxLens :: SimpleLens App Quux
 appQuuxLens = foo . snapletValue . quux
</pre><p>Lens composition is very similar to function composition except it works in
 the opposite direction (think Java-style System.out.println ordering) and
 it gives you a composed getter and setter at the same time.
</p></div><h1 id="g:3">Snaplet Helper Functions
</h1><div class="doc"><p>Your web application will itself get wrapped in a <code><a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a></code>, and the
 top-level user state of your application (which will likely contain other
 snaplets nested inside it) will look something like this:
</p><pre> data App = App
     { _foo                :: Snaplet Foo
     , _bar                :: Snaplet Bar
     , _someNonSnapletData :: String
     }
</pre><p>Every web application using snaplets has a top-most user state which
 contains all of the application state; we call this state the &quot;base&quot;
 state.
</p><p>We export several helper lenses for working with Snaplet types.
</p></div><div class="top"><p class="src"><a name="v:snapletConfig" class="def">snapletConfig</a> :: <span class="keyword">forall</span> s.  <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/lens-4.1.2.1/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> s) <a href="Snap-Snaplet.html#t:SnapletConfig">SnapletConfig</a></p></div><div class="top"><p class="src"><a name="v:snapletValue" class="def">snapletValue</a> :: <span class="keyword">forall</span> s.  <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/lens-4.1.2.1/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> s) s</p></div><div class="top"><p class="src"><a name="v:subSnaplet" class="def">subSnaplet</a> ::  <a href="Snap-Snaplet.html#t:SnapletLens">SnapletLens</a> a b -&gt; <a href="Snap-Snaplet.html#t:SnapletLens">SnapletLens</a> (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> a) b</p><div class="doc"><p>Transforms a lens of the type you get from makeLenses to an similar lens
 that is more suitable for internal use.
</p></div></div><h1 id="g:4">MonadSnaplet
</h1><div class="doc"><p>The primary abstraction in the snaplet infrastructure is a combination of
 the reader and state monads.  The state monad holds the top level
 application data type (from now on referred to as the base state).  The
 reader monad holds a lens from the base state to the current snaplet's
 state.  This allows quux snaplet functions to access and modify the Quux
 data structure without knowing anything about the App or Foo data
 structures. It also lets other snaplets call functions from the quux
 snaplet if they have the quux snaplet's lens <code>SimpleLens App (Snaplet Quux)</code>.
 We can view our application as a tree of snaplets and other pieces of data.
 The lenses are like pointers to nodes of the tree. If you have a pointer to
 a node, you can access the node and all of its children without knowing
 anything about the rest of the tree.
</p><p>Several monads use this infrastructure. These monads need at least three
 type parameters. Two for the lens type, and the standard 'a' denoting the
 monad return value. You will usually see this written in type signatures as
 &quot;m b v a&quot; or some variation. The 'm' is the type variable of the
 MonadSnaplet type class. 'b' is the base state, and 'v' is the state of
 the current &quot;view&quot; snaplet (or simply, current state).
</p><p>The MonadSnaplet type class distills the essence of the operations used
 with this pattern.  Its functions define fundamental methods for navigating
 snaplet trees.
</p></div><div class="top"><p class="src"><span class="keyword">class</span>  <a name="t:MonadSnaplet" class="def">MonadSnaplet</a> m  <span class="keyword">where</span></p><div class="doc"><p>The m type parameter used in the MonadSnaplet type signatures will
 usually be either Initializer or Handler, but other monads may sometimes be
 useful.
</p><p>Minimal complete definition:
</p><ul><li> <code><a href="Snap-Snaplet.html#v:withTop-39-">withTop'</a></code>, <code><a href="Snap-Snaplet.html#v:with-39-">with'</a></code>, <code><a href="Snap-Snaplet.html#v:getLens">getLens</a></code>, and <code><a href="Snap-Snaplet.html#v:getOpaqueConfig">getOpaqueConfig</a></code>.
</li></ul></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:with" class="def">with</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Snap-Snaplet.html#t:SnapletLens">SnapletLens</a> v v'</td><td class="doc"><p>A relative lens identifying a snaplet
</p></td></tr><tr><td class="src">-&gt; m b v' a</td><td class="doc"><p>Action from the lense's snaplet
</p></td></tr><tr><td class="src">-&gt; m b v a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Runs a child snaplet action in the current snaplet's context.  If you
 think about snaplet lenses using a filesystem path metaphor, the lens
 supplied to this snaplet must be a relative path.  In other words, the
 lens's base state must be the same as the current snaplet.
</p></div><p class="src"><a name="v:withTop" class="def">withTop</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Snap-Snaplet.html#t:SnapletLens">SnapletLens</a> b v'</td><td class="doc"><p>An &quot;absolute&quot; lens identifying a snaplet
</p></td></tr><tr><td class="src">-&gt; m b v' a</td><td class="doc"><p>Action from the lense's snaplet
</p></td></tr><tr><td class="src">-&gt; m b v a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Like <code><a href="Snap-Snaplet.html#v:with">with</a></code> but doesn't impose the requirement that the action
 being run be a descendant of the current snaplet.  Using our filesystem
 metaphor again, the lens for this function must be an absolute
 path--it's base must be the same as the current base.
</p></div><p class="src"><a name="v:with-39-" class="def">with'</a> ::  <a href="Snap-Snaplet.html#t:SnapletLens">SnapletLens</a> (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> v) v' -&gt; m b v' a -&gt; m b v a</p><div class="doc"><p>A variant of <code><a href="Snap-Snaplet.html#v:with">with</a></code> accepting a lens from snaplet to snaplet.  Unlike
 the lens used in the above <code><a href="Snap-Snaplet.html#v:with">with</a></code> function, this lens formulation has
 an identity, which makes it useful in certain circumstances.  The
 lenses generated by <code><a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/lens-4.1.2.1/html/Control-Lens-TH.html#v:makeLenses">makeLenses</a></code> will not work with this function,
 however the lens returned by <code><a href="Snap-Snaplet.html#v:getLens">getLens</a></code> will.
</p><pre>with = with' . subSnaplet</pre></div><p class="src"><a name="v:withTop-39-" class="def">withTop'</a> ::  <a href="Snap-Snaplet.html#t:SnapletLens">SnapletLens</a> (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> b) v' -&gt; m b v' a -&gt; m b v a</p><div class="doc"><p>The absolute version of <code><a href="Snap-Snaplet.html#v:with-39-">with'</a></code>
</p></div><p class="src"><a name="v:getLens" class="def">getLens</a> ::  m b v (<a href="Snap-Snaplet.html#t:SnapletLens">SnapletLens</a> (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> b) v)</p><div class="doc"><p>Gets the lens for the current snaplet.
</p></div><p class="src"><a name="v:getOpaqueConfig" class="def">getOpaqueConfig</a> ::  m b v <a href="Snap-Snaplet.html#t:SnapletConfig">SnapletConfig</a></p><div class="doc"><p>Gets the current snaplet's opaque config data type.  You'll only use
 this function when writing MonadSnaplet instances.
</p></div></div><div class="subs instances"><p id="control.i:MonadSnaplet" class="caption collapser" onclick="toggleSection('i:MonadSnaplet')">Instances</p><div id="section.i:MonadSnaplet" class="show"><table><tr><td class="src"><a href="Snap-Snaplet.html#t:MonadSnaplet">MonadSnaplet</a> <a href="Snap-Snaplet.html#t:Initializer">Initializer</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Snap-Snaplet.html#t:MonadSnaplet">MonadSnaplet</a> <a href="Snap-Snaplet.html#t:Handler">Handler</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:getSnapletAncestry" class="def">getSnapletAncestry</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> (m b v), <a href="Snap-Snaplet.html#t:MonadSnaplet">MonadSnaplet</a> m) =&gt; m b v [<a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a>]</p><div class="doc"><p>Gets a list of the names of snaplets that are direct ancestors of the
 current snaplet.
</p></div></div><div class="top"><p class="src"><a name="v:getSnapletFilePath" class="def">getSnapletFilePath</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> (m b v), <a href="Snap-Snaplet.html#t:MonadSnaplet">MonadSnaplet</a> m) =&gt; m b v <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a></p><div class="doc"><p>Gets the snaplet's path on the filesystem.
</p></div></div><div class="top"><p class="src"><a name="v:getSnapletName" class="def">getSnapletName</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> (m b v), <a href="Snap-Snaplet.html#t:MonadSnaplet">MonadSnaplet</a> m) =&gt; m b v (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a>)</p><div class="doc"><p>Gets the current snaple's name.
</p></div></div><div class="top"><p class="src"><a name="v:getSnapletDescription" class="def">getSnapletDescription</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> (m b v), <a href="Snap-Snaplet.html#t:MonadSnaplet">MonadSnaplet</a> m) =&gt; m b v <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a></p><div class="doc"><p>Gets a human readable description of the snaplet.
</p></div></div><div class="top"><p class="src"><a name="v:getSnapletUserConfig" class="def">getSnapletUserConfig</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> (m b v), <a href="Snap-Snaplet.html#t:MonadSnaplet">MonadSnaplet</a> m) =&gt; m b v <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/configurator-0.3.0.0/html/Data-Configurator-Types.html#t:Config">Config</a></p><div class="doc"><p>Gets the config data structure for the current snaplet.
</p></div></div><div class="top"><p class="src"><a name="v:getSnapletRootURL" class="def">getSnapletRootURL</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> (m b v), <a href="Snap-Snaplet.html#t:MonadSnaplet">MonadSnaplet</a> m) =&gt; m b v <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a></p><div class="doc"><p>Gets the base URL for the current snaplet.  Directories get added to
 the current snaplet path by calls to <code>nestSnaplet</code>.
</p></div></div><div class="top"><p class="src"><a name="v:snapletURL" class="def">snapletURL</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> (m b v), <a href="Snap-Snaplet.html#t:MonadSnaplet">MonadSnaplet</a> m) =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; m b v <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a></p><div class="doc"><p>Constructs a url relative to the current snaplet.
</p></div></div><div class="top"><p class="src"><a name="v:getRoutePattern" class="def">getRoutePattern</a> ::  <a href="Snap-Snaplet.html#t:Handler">Handler</a> b v (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a>)</p><div class="doc"><p>Gets the route pattern that matched for the handler.  This lets you find
 out exactly which of the strings you used in addRoutes matched.
</p></div></div><div class="top"><p class="src"><a name="v:setRoutePattern" class="def">setRoutePattern</a> ::  <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Snap-Snaplet.html#t:Handler">Handler</a> b v ()</p><div class="doc"><p>Sets the route pattern that matched for the handler.  Use this when to
 override the default pattern which is the key to the alist passed to
 addRoutes.
</p></div></div><h1 id="g:5">Snaplet state manipulation
</h1><div class="doc"><p>MonadSnaplet instances will typically have <code>MonadState v</code> instances.  We
 provide the following convenience functions which give the equivalent to
 <code>MonadState (Snaplet v)</code> for the less common cases where you need to work
 with the Snaplet wrapper.
</p></div><div class="top"><p class="src"><a name="v:getSnapletState" class="def">getSnapletState</a> ::  <a href="Snap-Snaplet.html#t:Handler">Handler</a> b v (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> v)</p><div class="doc"><p>Gets the <code>Snaplet v</code> from the current snaplet's state.
</p></div></div><div class="top"><p class="src"><a name="v:putSnapletState" class="def">putSnapletState</a> ::  <a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> v -&gt; <a href="Snap-Snaplet.html#t:Handler">Handler</a> b v ()</p><div class="doc"><p>Puts a new <code>Snaplet v</code> in the current snaplet's state.
</p></div></div><div class="top"><p class="src"><a name="v:modifySnapletState" class="def">modifySnapletState</a> ::  (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> v -&gt; <a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> v) -&gt; <a href="Snap-Snaplet.html#t:Handler">Handler</a> b v ()</p><div class="doc"><p>Modifies the <code>Snaplet v</code> in the current snaplet's state.
</p></div></div><div class="top"><p class="src"><a name="v:getsSnapletState" class="def">getsSnapletState</a> ::  (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> v -&gt; b) -&gt; <a href="Snap-Snaplet.html#t:Handler">Handler</a> b1 v b</p><div class="doc"><p>Gets the <code>Snaplet v</code> from the current snaplet's state and applies a
 function to it.
</p></div></div><h1 id="g:6">Initializer
</h1><div class="doc"><p>The Initializer monad is where your application's initialization happens.
 Initializers are run at startup and any time a site reload is triggered.
 The Initializer's job is to construct a snaplet's routes and initial state,
 set up filesystem data, read config files, etc.
</p><p>In order to initialize its state, a snaplet needs to initialize all the
 <code>Snaplet a</code> state for each of its subsnaplets.  The only way to construct
 a <code>Snaplet a</code> type is by calling <code><a href="Snap-Snaplet.html#v:nestSnaplet">nestSnaplet</a></code> or <code><a href="Snap-Snaplet.html#v:embedSnaplet">embedSnaplet</a></code> from
 within an initializer.
</p></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Initializer" class="def">Initializer</a> b v a </p><div class="doc"><p>Monad used for initializing snaplets.
</p></div><div class="subs instances"><p id="control.i:Initializer" class="caption collapser" onclick="toggleSection('i:Initializer')">Instances</p><div id="section.i:Initializer" class="show"><table><tr><td class="src"><a href="Snap-Snaplet.html#t:MonadSnaplet">MonadSnaplet</a> <a href="Snap-Snaplet.html#t:Initializer">Initializer</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> (<a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Functor">Functor</a> (<a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Applicative.html#t:Applicative">Applicative</a> (<a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Haskell/ghc-7.6.3/lib/transformers-0.3.0.0/doc/html/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> (<a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:SnapletInit" class="def">SnapletInit</a> b v </p><div class="doc"><p>Opaque newtype which gives us compile-time guarantees that the user is
 using makeSnaplet and either nestSnaplet or embedSnaplet correctly.
</p></div></div><div class="top"><p class="src"><a name="v:makeSnaplet" class="def">makeSnaplet</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a></td><td class="doc"><p>A default id for this snaplet.  This is only used when
 the end-user has not already set an id using the
 nameSnaplet function.
</p></td></tr><tr><td class="src">-&gt; <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a></td><td class="doc"><p>A human readable description of this snaplet.
</p></td></tr><tr><td class="src">-&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a>)</td><td class="doc"><p>The path to the directory holding the snaplet's reference
 filesystem content.  This will almost always be the
 directory returned by Cabal's getDataDir command, but it
 has to be passed in because it is defined in a
 package-specific import.  Setting this value to Nothing
 doesn't preclude the snaplet from having files in in the
 filesystem, it just means that they won't be copied there
 automatically.
</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v v</td><td class="doc"><p>Snaplet initializer.
</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Snaplet.html#t:SnapletInit">SnapletInit</a> b v</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>All snaplet initializers must be wrapped in a call to <code>makeSnaplet</code>,
 which handles standardized housekeeping common to all snaplets.
 Common usage will look something like
 this:
</p><pre>
 fooInit :: SnapletInit b Foo
 fooInit = makeSnaplet &quot;foo&quot; &quot;An example snaplet&quot; Nothing $ do
     -- Your initializer code here
     return $ Foo 42
</pre><p>Note that you're writing your initializer code in the Initializer monad,
 and makeSnaplet converts it into an opaque SnapletInit type.  This allows
 us to use the type system to ensure that the API is used correctly.
</p></div></div><div class="top"><p class="src"><a name="v:nestSnaplet" class="def">nestSnaplet</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a></td><td class="doc"><p>The root url for all the snaplet's routes.  An empty
 string gives the routes the same root as the parent
 snaplet's routes.
</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Snaplet.html#t:SnapletLens">SnapletLens</a> v v1</td><td class="doc"><p>Lens identifying the snaplet
</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Snaplet.html#t:SnapletInit">SnapletInit</a> b v1</td><td class="doc"><p>The initializer function for the subsnaplet.
</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> v1)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Runs another snaplet's initializer and returns the initialized Snaplet
 value.  Calling an initializer with nestSnaplet gives the nested snaplet
 access to the same base state that the current snaplet has.  This makes it
 possible for the child snaplet to make use of functionality provided by
 sibling snaplets.
</p></div></div><div class="top"><p class="src"><a name="v:embedSnaplet" class="def">embedSnaplet</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a></td><td class="doc"><p>The root url for all the snaplet's routes.  An empty
 string gives the routes the same root as the parent
 snaplet's routes.
</p><p>NOTE: Because of the stronger isolation provided by
 embedSnaplet, you should be more careful about using an
 empty string here.
</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Snaplet.html#t:SnapletLens">SnapletLens</a> v v1</td><td class="doc"><p>Lens identifying the snaplet
</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Snaplet.html#t:SnapletInit">SnapletInit</a> v1 v1</td><td class="doc"><p>The initializer function for the subsnaplet.
</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> v1)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Runs another snaplet's initializer and returns the initialized Snaplet
 value.  The difference between this and <code><a href="Snap-Snaplet.html#v:nestSnaplet">nestSnaplet</a></code> is the first type
 parameter in the third argument.  The &quot;v1 v1&quot; makes the child snaplet
 think that it is the top-level state, which means that it will not be able
 to use functionality provided by snaplets included above it in the snaplet
 tree. This strongly isolates the child snaplet, and allows you to eliminate
 the b type variable.  The embedded snaplet can still get functionality
 from other snaplets, but only if it nests or embeds the snaplet itself.
</p><p>Note that this function does not change where this snaplet is located in
 the filesystem.  The snaplet directory structure convention stays the same.
 Also, embedSnaplet limits the ways that snaplets can interact, so we
 usually recommend using nestSnaplet instead.  However, we provide this
 function because sometimes reduced flexibility is useful.  In short, if
 you don't understand what this function does for you from looking at its
 type, you probably don't want to use it.
</p></div></div><div class="top"><p class="src"><a name="v:nameSnaplet" class="def">nameSnaplet</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a></td><td class="doc"><p>The snaplet name
</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Snaplet.html#t:SnapletInit">SnapletInit</a> b v</td><td class="doc"><p>The snaplet initializer function
</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Snaplet.html#t:SnapletInit">SnapletInit</a> b v</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Sets a snaplet's name.  All snaplets have a default name set by the
 snaplet author.  This function allows you to override that name.  You will
 have to do this if you have more than one instance of the same kind of
 snaplet because snaplet names must be unique.  This function must
 immediately surround the snaplet's initializer.  For example:
</p><pre>fooState &lt;- nestSnaplet &quot;fooA&quot; $ nameSnaplet &quot;myFoo&quot; $ fooInit</pre></div></div><div class="top"><p class="src"><a name="v:onUnload" class="def">onUnload</a> ::  <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> () -&gt; <a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v ()</p><div class="doc"><p>Attaches an unload handler to the snaplet.  The unload handler will be
 called when the server shuts down, or is reloaded.
</p></div></div><div class="top"><p class="src"><a name="v:addPostInitHook" class="def">addPostInitHook</a> ::  (v -&gt; <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/either-4.3.0.1/html/Control-Monad-Trans-Either.html#t:EitherT">EitherT</a> <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> v) -&gt; <a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v ()</p><div class="doc"><p>Adds an IO action that modifies the current snaplet state to be run at
 the end of initialization on the state that was created.  This makes it
 easier to allow one snaplet's state to be modified by another snaplet's
 initializer.  A good example of this is when a snaplet has templates that
 define its views.  The Heist snaplet provides the <code>addTemplates</code> function
 which allows other snaplets to set up their own templates.  <code>addTemplates</code>
 is implemented using this function.
</p></div></div><div class="top"><p class="src"><a name="v:addPostInitHookBase" class="def">addPostInitHookBase</a> ::  (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> b -&gt; <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/either-4.3.0.1/html/Control-Monad-Trans-Either.html#t:EitherT">EitherT</a> <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> b)) -&gt; <a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v ()</p><div class="doc"><p>Variant of addPostInitHook for when you have things wrapped in a Snaplet.
</p></div></div><div class="top"><p class="src"><a name="v:printInfo" class="def">printInfo</a> ::  <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> -&gt; <a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v ()</p><div class="doc"><p>Initializers should use this function for all informational or error
 messages to be displayed to the user.  On application startup they will be
 sent to the console.  When executed from the reloader, they will be sent
 back to the user in the HTTP response.
</p></div></div><div class="top"><p class="src"><a name="v:getRoutes" class="def">getRoutes</a> ::  <a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v [<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a>]</p><div class="doc"><p>Lets you retrieve the list of routes currently set up by an Initializer.
 This can be useful in debugging.
</p></div></div><div class="top"><p class="src"><a name="v:getEnvironment" class="def">getEnvironment</a> ::  <a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a></p><div class="doc"><p>Return the current environment string.  This will be the
 environment given to <code><a href="Snap-Snaplet.html#v:runSnaplet">runSnaplet</a></code> or from the command line when
 using <code><a href="Snap-Snaplet.html#v:serveSnaplet">serveSnaplet</a></code>.  Usefully for changing behavior during
 development and testing.
</p></div></div><h1 id="g:7">Routes
</h1><div class="doc"><p>Snaplet initializers are also responsible for setting up any routes defined
 by the snaplet.  To do that you'll usually use either <code><a href="Snap-Snaplet.html#v:addRoutes">addRoutes</a></code> or
 <code><a href="Snap-Snaplet.html#v:wrapSite">wrapSite</a></code>.
</p></div><div class="top"><p class="src"><a name="v:addRoutes" class="def">addRoutes</a> ::  [(<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a>, <a href="Snap-Snaplet.html#t:Handler">Handler</a> b v ())] -&gt; <a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v ()</p><div class="doc"><p>Adds routing to the current <code><a href="Snap-Snaplet.html#t:Handler">Handler</a></code>.  The new routes are merged with
 the main routing section and take precedence over existing routing that was
 previously defined.
</p></div></div><div class="top"><p class="src"><a name="v:wrapSite" class="def">wrapSite</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="Snap-Snaplet.html#t:Handler">Handler</a> b v () -&gt; <a href="Snap-Snaplet.html#t:Handler">Handler</a> b v ())</td><td class="doc"><p>Handler modifier function
</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Snaplet.html#t:Initializer">Initializer</a> b v ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Wraps the <em>base</em> snaplet's routing in another handler, allowing you to run
 code before and after all routes in an application.
</p><p>Here are some examples of things you might do:
</p><pre> wrapSite (\site -&gt; logHandlerStart &gt;&gt; site &gt;&gt; logHandlerFinished)
 wrapSite (\site -&gt; ensureAdminUser &gt;&gt; site)
</pre></div></div><h1 id="g:8">Handlers
</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Handler" class="def">Handler</a> b v a </p><div class="doc"><p>Snaplet infrastructure is available during runtime request processing
 through the Handler monad.  There aren't very many standalone functions to
 read about here, but this is deceptive.  The key is in the type class
 instances.  Handler is an instance of <code><a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-core-0.9.6.3/html/Snap-Core.html#t:MonadSnap">MonadSnap</a></code>, which means it is the
 monad you will use to write all your application routes.  It also has a
 <code><a href="Snap-Snaplet.html#t:MonadSnaplet">MonadSnaplet</a></code> instance, which gives you all the functionality described
 above.
</p></div><div class="subs instances"><p id="control.i:Handler" class="caption collapser" onclick="toggleSection('i:Handler')">Instances</p><div id="section.i:Handler" class="show"><table><tr><td class="src"><a href="Snap-Snaplet.html#t:MonadSnaplet">MonadSnaplet</a> <a href="Snap-Snaplet.html#t:Handler">Handler</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-Reader-Class.html#t:MonadReader">MonadReader</a> v (<a href="Snap-Snaplet.html#t:Handler">Handler</a> b v)</td><td class="doc"><p>The MonadState instance gives you access to the current snaplet's state.
</p></td></tr><tr><td class="src"><a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-State-Class.html#t:MonadState">MonadState</a> v (<a href="Snap-Snaplet.html#t:Handler">Handler</a> b v)</td><td class="doc"><p>The MonadState instance gives you access to the current snaplet's state.
</p></td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> (<a href="Snap-Snaplet.html#t:Handler">Handler</a> b v)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Functor">Functor</a> (<a href="Snap-Snaplet.html#t:Handler">Handler</a> b v)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:MonadPlus">MonadPlus</a> (<a href="Snap-Snaplet.html#t:Handler">Handler</a> b v)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Applicative.html#t:Applicative">Applicative</a> (<a href="Snap-Snaplet.html#t:Handler">Handler</a> b v)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/MonadCatchIO-transformers-0.3.1.2/html/Control-Monad-CatchIO.html#t:MonadCatchIO">MonadCatchIO</a> (<a href="Snap-Snaplet.html#t:Handler">Handler</a> b v)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Applicative.html#t:Alternative">Alternative</a> (<a href="Snap-Snaplet.html#t:Handler">Handler</a> b v)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Haskell/ghc-7.6.3/lib/transformers-0.3.0.0/doc/html/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> (<a href="Snap-Snaplet.html#t:Handler">Handler</a> b v)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-core-0.9.6.3/html/Snap-Core.html#t:MonadSnap">MonadSnap</a> (<a href="Snap-Snaplet.html#t:Handler">Handler</a> b v)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:failIfNotLocal" class="def">failIfNotLocal</a> :: <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-core-0.9.6.3/html/Snap-Core.html#t:MonadSnap">MonadSnap</a> m =&gt; m b -&gt; m b</p><div class="doc"><p>Pass if the request is not coming from localhost.
</p></div></div><div class="top"><p class="src"><a name="v:reloadSite" class="def">reloadSite</a> ::  <a href="Snap-Snaplet.html#t:Handler">Handler</a> b v ()</p><div class="doc"><p>Handler that reloads the site.
</p></div></div><div class="top"><p class="src"><a name="v:modifyMaster" class="def">modifyMaster</a> ::  v -&gt; <a href="Snap-Snaplet.html#t:Handler">Handler</a> b v ()</p><div class="doc"><p>Lets you change a snaplet's initial state.  It's alomst like a reload,
 except that it doesn't run the initializer.  It just modifies the result of
 the initializer.  This can be used to let you define actions for reloading
 individual snaplets.
</p></div></div><div class="top"><p class="src"><a name="v:bracketHandler" class="def">bracketHandler</a> ::  <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> a -&gt; (a -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> x) -&gt; (a -&gt; <a href="Snap-Snaplet.html#t:Handler">Handler</a> b v c) -&gt; <a href="Snap-Snaplet.html#t:Handler">Handler</a> b v c</p><div class="doc"><p>This function brackets a Handler action in resource acquisition and
 release.  Like <code><a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-core-0.9.6.3/html/Snap-Core.html#v:bracketSnap">bracketSnap</a></code>,  this is provided because MonadCatchIO's
 <code><a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/MonadCatchIO-transformers-0.3.1.2/html/Control-Monad-CatchIO.html#v:bracket">bracket</a></code> function doesn't work properly in the case of a short-circuit
 return from the action being bracketed.
</p><p>In order to prevent confusion regarding the effects of the
 aquisition and release actions on the Handler state, this function
 doesn't accept Handler actions for the acquire or release actions.
</p><p>This function will run the release action in all cases where the
 acquire action succeeded.  This includes the following behaviors
 from the bracketed Snap action.
</p><ol><li> Normal completion
</li><li> Short-circuit completion, either from calling <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#v:fail">fail</a></code> or <code><a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-core-0.9.6.3/html/Snap-Core.html#v:finishWith">finishWith</a></code>
</li><li> An exception being thrown.
</li></ol></div></div><h1 id="g:9">Serving Applications
</h1><div class="top"><p class="src"><a name="v:runSnaplet" class="def">runSnaplet</a> ::  <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> -&gt; <a href="Snap-Snaplet.html#t:SnapletInit">SnapletInit</a> b b -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> (<a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a>, <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-core-0.9.6.3/html/Snap-Core.html#t:Snap">Snap</a> (), <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> ())</p><div class="doc"><p>Given an environment and a Snaplet initializer, produce a concatenated log
 of all messages generated during initialization, a snap handler, and a
 cleanup action.  The environment is an arbitrary string such as &quot;devel&quot; or
 &quot;production&quot;.  This string is used to determine the name of the
 configuration files used by each snaplet.  If an environment of Nothing is
 used, then runSnaplet defaults to &quot;devel&quot;.
</p></div></div><div class="top"><p class="src"><a name="v:combineConfig" class="def">combineConfig</a> ::  <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-server-0.9.4.5/html/Snap-Http-Server-Config.html#t:Config">Config</a> <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-core-0.9.6.3/html/Snap-Core.html#t:Snap">Snap</a> a -&gt; <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-core-0.9.6.3/html/Snap-Core.html#t:Snap">Snap</a> () -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> (<a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-server-0.9.4.5/html/Snap-Http-Server-Config.html#t:Config">Config</a> <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-core-0.9.6.3/html/Snap-Core.html#t:Snap">Snap</a> a, <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-core-0.9.6.3/html/Snap-Core.html#t:Snap">Snap</a> ())</p><div class="doc"><p>Given a configuration and a snap handler, complete it and produce the
 completed configuration as well as a new toplevel handler with things like
 compression and a 500 handler set up.
</p></div></div><div class="top"><p class="src"><a name="v:serveSnaplet" class="def">serveSnaplet</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-server-0.9.4.5/html/Snap-Http-Server-Config.html#t:Config">Config</a> <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-core-0.9.6.3/html/Snap-Core.html#t:Snap">Snap</a> <a href="Snap-Snaplet-Config.html#t:AppConfig">AppConfig</a></td><td class="doc"><p>The configuration of the server - you can usually pass a
 default <code><a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-server-0.9.4.5/html/Snap-Http-Server-Config.html#t:Config">Config</a></code> via
 <code><a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/snap-server-0.9.4.5/html/Snap-Http-Server-Config.html#t:defaultConfig">defaultConfig</a></code>.
</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Snaplet.html#t:SnapletInit">SnapletInit</a> b b</td><td class="doc"><p>The snaplet initializer function.
</p></td></tr><tr><td class="src">-&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Initialize and run a Snaplet. This function parses command-line arguments,
 runs the given Snaplet initializer, and starts an HTTP server running the
 Snaplet's toplevel <code><a href="Snap-Snaplet.html#t:Handler">Handler</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:loadAppConfig" class="def">loadAppConfig</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/directory-tree-0.12.0/html/System-Directory-Tree.html#t:FileName">FileName</a></td><td class="doc"><p>The name of the config file to look for.  In snap
 applications, this is something based on the
 environment...i.e. <code>devel.cfg</code>.
</p></td></tr><tr><td class="src">-&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>Path to the root directory of your project.
</p></td></tr><tr><td class="src">-&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/configurator-0.3.0.0/html/Data-Configurator-Types.html#t:Config">Config</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Allows you to get all of your app's config data in the IO monad without
 the web server infrastructure.
</p></div></div><h1 id="g:10">Snaplet Lenses
</h1><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:SnapletLens" class="def">SnapletLens</a> s a = <a href="file:///Users/wfreeman/neo4j-cypher-ex/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/lens-4.1.2.1/html/Control-Lens-Lens.html#t:ALens-39-">ALens'</a> s (<a href="Snap-Snaplet.html#t:Snaplet">Snaplet</a> a)</p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.2</p></div></body></html>